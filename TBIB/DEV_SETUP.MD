Fichier : /TBIB/DEV_SETUP.md

text
# TBIB - Guide d'Installation & DÃ©veloppement

## PrÃ©requis

- Python 3.11+
- PostgreSQL 16 (ou SQLite pour dev local)
- UV (gestionnaire de paquets Python)

## Installation Rapide

```bash
# 1. Cloner le repo
git clone [ton-repo-url]
cd TBIB

# 2. Installer les dÃ©pendances
uv sync

# 3. Configurer les variables d'environnement
cp .env.example .env
# Ã‰diter .env avec tes valeurs

# 4. Initialiser la base de donnÃ©es
cd TBIB
uv run python seed_data.py
Lancement du Serveur
Port fixe : 5001 (ne jamais changer)

bash
cd TBIB
uv run python main.py --port 5001
L'application est accessible sur : http://localhost:5001

Comptes de Test
RÃ´le	Email	Password
Docteur	doctor1@tbib.dz	doctor123
Patient	patient1@tbib.dz	patient123
SecrÃ©taire	secretary1@tbib.dz	secretary123
Admin	admin@tbib.dz	admin123
Tests
bash
# Tous les tests
uv run pytest tests/ -v

# Tests unitaires uniquement
uv run pytest tests/unit/ -v

# Tests contract (vÃ©rifie respect architecture)
uv run pytest tests/contract/ -v

# Tests chaos (destructifs)
uv run pytest tests/chaos/ -v
Structure du Projet
text
/TBIB
  â”œâ”€â”€ ARCHITECTURE.md        # Vision stratÃ©gique
  â”œâ”€â”€ AGENT_PROTOCOL.md      # RÃ¨gles de code
  â”œâ”€â”€ DEV_SETUP.md          # Ce fichier
  â”œâ”€â”€ main.py               # Point d'entrÃ©e
  â”œâ”€â”€ seed_data.py          # Init DB
  â””â”€â”€ /app
      â”œâ”€â”€ /blueprints       # Routes HTTP
      â”œâ”€â”€ /services         # Logique mÃ©tier
      â”œâ”€â”€ /models           # SQLAlchemy
      â””â”€â”€ /templates        # Jinja2
Troubleshooting
Erreur "Database already exists"
bash
rm TBIB/instance/tbib.db
rm tbib.db  # Si Ã  la racine
uv run python seed_data.py
Port 5001 dÃ©jÃ  utilisÃ©
bash
lsof -ti:5001 | xargs kill -9
Erreur CSRF 400
VÃ©rifier que :

Le formulaire a {{ csrf_token() }}

Les fetch utilisent TBIB.post() avec header X-CSRFToken

Workflow Git
bash
# Avant de coder
git checkout -b feature/nom-feature

# Avant de commit
uv run pytest tests/contract/ -v  # VÃ©rifier le contrat

# Commit
git add .
git commit -m "feat: description"

# Push
git push origin feature/nom-feature
Contact
En cas de problÃ¨me : [ton-email-ou-contact]

text

***

## âœ… CHECKLIST DE CE SOIR

Avant de dormir, tu dois avoir dans `/TBIB` :

- âœ… `ARCHITECTURE.md` (modifiÃ© avec sections 5-10)
- âœ… `AGENT_PROTOCOL.md` (crÃ©Ã©, 600 lignes)
- âœ… `DEV_SETUP.md` (Ã  crÃ©er maintenant, 5 min)

**Ces 3 fichiers = ta fondation documentaire complÃ¨te.**

***

## ðŸ“… DEMAIN MATIN (Avec terminal)

### 1. Commit des 3 fichiers (5 min)

```bash
cd TBIB
git add ARCHITECTURE.md AGENT_PROTOCOL.md DEV_SETUP.md
git commit -m "docs: Architecture Agent-Friendly complÃ¨te (Protocole Omega)"
git push
2. Quick Win : CrÃ©er /services (5 min)
bash
cd TBIB/app
mkdir -p services
touch services/__init__.py
touch services/smartflow.py
touch services/ewassfa.py
touch services/billing.py
3. Audit CSRF rapide (10 min)
bash
# Lister tous les formulaires POST
grep -rn "<form method=\"POST\"" TBIB/templates/

# Note mentalement lesquels manquent csrf_token
# (Ne pas corriger maintenant, Jules le fera)